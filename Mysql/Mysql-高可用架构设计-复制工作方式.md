## 复制工作方式

* 主将变更写入二进制日志
* 从读取主的二进制日志变更并写入到`relay_log`中 (要完成这个二进制日志的传输过程，需要在从服务器上启动一个I/O工作线程，这个线程会和主库建立一个普通的客户端连接，然后在主库上启动一个特殊二进制转储线程称之为binlogdump，从库上的I/O线程通过这个转储线程读取主库上的二进制日志中的事件，它不会对事件进行轮询，如果该线程追赶上了主库，它将进入sleep状态，直到主库发送信号，通知其又有了新的事件产生，才会被唤醒，这个中继日志的格式和二进制日志的格式是完全相同的，我们也可以使用我们之前的binlog工具进行读取中继日志中的内容，而根据如何指定从什么位置开始读取主库二进制日志的方法的不同，复制又可以分为`基于日志点的复制` `基于GTID的复制`)
* 在从上重放`relay_log`中的日志 (这一步由从服务器上的SQL线程来完成，这种由SQL线程所执行的事件，我们也可以通过配置的选项，来确定是否记录到从服务器的二进制日志中，根据二进制日志的记录格式不同，这种存放的方式也会有不同) [基于SQL段的日志是在从库上重新重新执行记录的SQL、基于行的日志则是在从库上直接应用对数据库行的修改]