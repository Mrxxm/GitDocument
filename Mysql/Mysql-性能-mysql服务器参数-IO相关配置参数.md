## IO相关配置参数

Innodb I/O相关配置参数

* `Innodb_log_file_size` (控制单个事务日志的大小)
* `Innosb_log_files_in_group` (控制事务日志文件的个数)
* 事务日志的总大小 = `Innodb_log_file_size` * `Innosb_log_files_in_group`

这两个参数决定了事务日志，也就是redo log的大小和数量。为了减少事务提交时产生的IO开销，Innodb使用了预写日志的方式。事务日志是循环使用的，写满一个以后写入下一个，先写入事务日志缓存区，然后再刷新到磁盘的。

* `Innodb_log_buffer_size` (控制日志缓冲区的大小，1秒一次日志缓冲的刷新，不需要配置很大`32M ~ 128M`)

相对于事务日志缓存区来说，刷新日志的频繁程度，对性能的影响可能会更大一些。

* `Innodb_flush_log_at_trx_commit` (控制事务刷新日志缓存到磁盘日志的频繁度) 
* `0` 每秒进行一次log写入cache，并flush log到磁盘 (在事务提交时，并不做任何事情，这个设置在mysql崩溃时，至少丢失一秒钟的事务)
* `1[默认]` 在每次事务提交执行log写入cache，并flush log到磁盘 (最安全的设置，但是性能最差)
* `2[建议]` 每次事务提交，执行log数据写入到cache，每秒执行一次flush log到磁盘 (`0`于`2`区别在于，`2`不会丢失事务，只有在整个服务器宕机时，会丢失一秒的事务)

* `Innodb_flush_method = O_DIRECT` (控制Innodb数据文件和日志文件如何跟文件系统进行交互，影响Innodb如何写数据，同时也影响Innodb如何去读取数据，`O_DIRECT`通知操作系统不要缓存数据，也不要预读，这个选项完全关闭了操作系统的缓存，并使所有读和写直接通过存储设备来完成，避免Innodb和操作系统对数据的双重缓存)
* `Innodb_file_per_table = 1` (控制Innodb如何控制表空间，如果设置为`1`，Innodb会为每个表建立一个表空间，否则会把Innodb所有表数据记入到系统表空间中，强烈建议大家启用这个参数)
* `Innodb_doublewrite = 1` (控制Innodb是否使用双写缓存，主要避免一次写入数据不完整，导致的数据损坏，Innodb的一个页默认大小是`16k`，当系统崩溃或者程序bug造成一个磁盘写操作不能完整的完成，这种不完整的写入就会发生，会造成`16K`数据不完整的写入到文件中，这时数据文件就会损坏，建议大家启用，保证数据的安全性)

---

MyISAM I/O相关操作

* `delay_key_weite` (控制MyISAM事务刷新日志缓存刷新到磁盘日志的频繁度)
* `OFF` 每次写操作后刷新键缓冲中的脏块到磁盘 [最安全，性能也最差的操作]
* `ON` 只对在键表时指定了`delay_key_write`选项的表使用延迟刷新
* `ALL` 对所有MyISAM表都使用延迟键写入 [服务崩溃，有的块没有写入到磁盘文件，导致索引文件损坏，需要对表进行修复] 