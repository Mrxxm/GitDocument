## MMM架构介绍

MMM是Mysql多主复制管理器的简称 

* MMM工作在同一时间只有一台主服务器对外提供服务的情况下

主要作用：监控和管理Mysql的主主复制拓扑，并在当前的主服务器失效时，进行主和主备服务器之间的主从切换和故障转移等工作。

##### MMM为我们提供了什么功能 (MMM工作在同一时间只有一台主服务器对外提供服务的情况下)

* 监控Mysql主从复制健康情况
* 在主库出现宕机时进行故障转移并自动配置其他从对新主的复制 (存在问题：如何找到从库对应的新的主库日志点的日志同步点 ：如果存在多个从库出现数据不一致的情况如何处理)
* 提供了主，写虚拟IP，在主从服务器出现问题时可以自动迁移虚拟IP

#### MMM架构

MMM是管理Mysql主主复制的

![](https://img3.doubanio.com/view/photo/l/public/p2541728080.jpg)

##### MMM部署需要哪些资源


| 名称资源 | 数量 | 说明 |
| --- | --- | --- |
| 主DB服务器 | 2 | 用于主备模式的主主复制配置 |
| 从DB服务器 | 0-N | 可以配置0台或多台从服务器，但不建议太多 |
| 监控服务器 | 1 | 用于监控Mysql复制集群 |
| IP地址 | 2*(n+1) | n为Mysql服务器的数量 |
| 监控用户 | 1 | 用于监控数据库状态的Mysql用户(replication client) |
| 代理用户 | 1 | 用户MMM代理的Mysql用户(super,replication client,process) |
| 复制用户 | 1 | 用户配置Mysql复制的Mysql用户(replication slave) |

