## 什么是高可用架构

什么是高可用

* 通过尽量缩短日常维护操作和宕机所导致的停机时间，以提高系统和应用的可用性

* `(365 * 24 * 60) * (1 - 0.99999) = 5.256 分钟`

#### 如何实现高可用

避免导致系统不可用的因素，减少系统不可用的时间

* 服务器磁盘空间耗尽 (备份或者各种查询日志突增导致磁盘空间被占满。Mysql由于无法记录二进制日志，无法处理新的请求而产生的系统不可用的故障。)
* 性能糟糕的SQL
* 表的结构和索引没有优化
* 主从数据不一致
* 人为的操作失误等等

解决：

* 建立完善的监控及报警系统
* 对备份数据进行恢复测试
* 正确配置数据库环境
* 对不需要的数据进行归档和清理

增加系统冗余，保证发生系统不可用时可以尽快恢复

* 避免存在单点故障
* 主从切换及故障转移

##### 如何解决Mysql单点故障

单点故障是指提供相同功能的组件只有一个，这个挂了就会影响到整个系统。组成应用系统的各个组件都有可能成为单点。

* 利用SUN共享存储或DRDB磁盘复制解决Mysql单点故障
* 利用多写集群或NDB集群来解决Mysql的单点故障 (如果内存不足NDB集群的性能就会非常差)
* 利用Mysql主从复制来解决Mysql单点故障 (等于解决主服务器的单点问题)

##### 如何解决主服务器的单点问题

* 主服务器切换后，如何通知应用新的主服务器的IP地址
* 如何检查Mysql主服务器是否可用
* 如何处理从服务器和新主服务器之间的那种复制关系


