## 二进制日志格式对复制的影响

根据二进制数据格式

* 基于SQL语句的复制 (SBR) (主数据库二进制日志格式使用的是statement格式)
* 基于行的复制 (RBR) (主数据库二进制日志格式使用的是基于行的日志格式)
* 混合模式 (根据实际内容在以上两者间切换)

#### 对复制的影响

基于SQL语句的复制 (SBR) [Mysql 5.1.4之前的版本中只存在这种基于SQL语句的复制，又称之为逻辑复制。主库会记录修改的SQL语句，备库会读取并存放这些SQL语句]

优点： 

* 生成的日志量较少，节约网络的I/O (由于基于段的记录格式)
* 并不强制要求主从数据库的表定义完全相同 (比如兼容的字段类型或列的顺序不同，都可以很好的完成复制操作)
* 相比于基于行的复制方式更为灵活

缺点：

* 对于非确定性事件，无法保证主从复制数据的一致性
* 对于存储过程，触发器，自定义函数进行的修改也可能造成数据不一致
* 相比于基于行的复制方式在从上执行时需要更多的行锁


基于行的复制 (RBR) [主库二进制日志使用的是ROW格式]

优点：

* 可以应用于任何SQL的复制包括非确定函数，存储过程等
* 可以减少数据库锁的使用

缺点：

* 要求主从数据库的表结构相同，否则可能会中断复制
* 无法在从上单独执行触发器