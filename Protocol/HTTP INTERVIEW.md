## HTTP 面试知识小结

### 什么是Http协议

HTTP是hypertext transfer protocol(超文本传输协议)的简写，它是TCP/IP协议的一个应用层协议，用于定义WEB浏览器与WEB服务器之间交换数据的过程。

### Http协议有什么特点

1. 支持客户端/服务器模式 
2. 无连接:每次连接只处理一个请求，服务器处理完请求后，并收到客户端的应答后，即断开连接。 
3. 无状态: 无状态是指协议对于事物处理没有记忆能力。对于无状态这一特点，可以通过cookie或者session回话进行保存。

#### HTTP 1.1版本新特性

1. 默认持久连接节省通信量，只要客户端服务端任意一端没有明确提出断开TCP连接，就一直保持连接，可以发送多次HTTP请求。
2. 管线化，客户端可以同时发出多个HTTP请求， 不用一个个等待响应。
3. 断点续传原理

### Http的组成

1.请求报文:

* 请求行:包含请求方法,URI,HTTP版本协议。
* 请求头部。
* 请求正文。

2.响应报文:

* 状态行:包含HTTP版本,状态码,状态码原因短语。
* 响应头部:
* 相应正文:

### Http请求方法

* http1.0:get、post和head
* http1.1 新增的请求方式: delete、put、connect、 tarce和options

1. GET: 用于请求访问已经被URI(统一资源标识符)识别的资源，可以通过URL传参给服务器。 
2. POST: 用于传输信息给服务器，主要功能与GET方法类似，但一般推荐使 POST 式。 
3. PUT: 传输文件，报文主体中包含文件内容，保存到对应URI位置。
4. HEAD: 获得报文首部，与GET方法类似，只是不返回报文主体，一般用于验证URI是否有效。 
5. DELETE: 删除文件，与PUT方法相反，删除对应URI位置的文件。
6. OPTIONS: 查询相应URI支持的HTTP方法。
7. TRACE: 回显服务器收到的请求，主要用于测试或诊断。 
8. CONNECT: http1.1中预留给能够将连接改为管道方式的代理服务器。 前6个为常用方法，主要记忆GET和POST。

### GET方法和POST方法的区别

1. GET 主要是从服务器上获取资源; POST 主要是向服务器发送数据。
2. GET 传输数据是通过URL请求，以field(字段) = value的形式，置于URL后，并用"?"连接，多个请求数据间用"&"连接， 如`http://127.0.0.1/Test/login.a...`，这个过程用户是可见的;
POST 传输数据通过Http的post机制，将字段与对应值封存在请求实体中发送给服务器，这个过程对用户是不可见的。 
3. GET 传输的数据量小，因为受URL长度限制，但效率较高; POST 可以传输大量数据，所以上传文件时只能 Post方式; 
4. GET 是不安全的，因为URL是可见的，可能会泄露私密信息，如密码等; POST较GET安全性较高; 
5. GET 方式只能支持ASCII字符，向服务器传的中文字符可能会乱码; POST支持标准字符集，可以正确传递中文字符。

### HTTP常见状态码

* 100-199: 信息性状态码
* 200-299: 成功状态码

200: 请求被正常处理。  
204: 请求被受理但没有资源可以返回。  
206: 客户端只是请求资源的一部分，服务器只对请求的部分资源执行GET方法，相应报文中通过Content-Range指定范围的资源。

* 300-399: 重定向状态码

301: 永久性重定向。  
302: 临时重定向。  
303: 与302状态码有相似功能，只是它希望客户端在请求一个URI的时候，能通过GET方法重定向到另一个URI上。  
304: 发送附带条件的请求时，条件不满足时返回，与重定向无关。  
307: 临时重定向，与302类似，只是强制要求使用POST方法。

* 400-499: 客户端错误状态码

400: 请求报文语法有误，服务器无法识别。
401: 请求需要认证。
403: 请求的对应资源禁止被访问。
404: 服务器方法找到对应资源。

* 500-599: 服务端错误状态码

500: 服务器内部错误。  
503: 服务器正忙。

###  一个完整的HTTP事物过程

1. 域名解析。  
2. 发起TCP的3次握手。    
3. 建立TCP连接后发起http请求。   
4. 服务器端响应http请求，浏览器得到html代码。   
5. 浏览器解析html代码，并请求html代码中的资源。   
6. 浏览器对页面进行渲染呈现给用户。  

### HTTP优化

1. 负载均衡优化和加速HTTP应用。  
2. 利用HTTP Cache来优化网站。

### HTTP的缺点

1. 通信使用明文不加密，内容可能被窃听。
2. 不验证通信方身份，可能遭到伪装。 
3. 无法验证报文完整性，可能被篡改。

### HTTPS

HTTPS就是HTTP加上加密处理(一般是SSL安全通信线路)+认证+完整性保护。

### HTTP与HTTPS的区别

1. HTTP 的URL以`http://`开头， HTTPS 的URL以`https://`开头。
2. HTTP 是不安全的，HTTPS 是安全的。
3. HTTP 标准端口是80 ，HTTPS 的标准端口是443。
4. 在OSI 网络模型中，HTTP 作于应用层， HTTPS 的安全传输机制工作在传输层。
5. HTTP 无方法加密， HTTPS 对传输的数据进行加密。
6. HTTP 无需证书， HTTPS 需要CA机构wosign的颁发的SSL证书。

### HTTPS工作原理

1. 先HTTP请求服务端生成证书，客户端对证书的有效期、合法性、域名是否与请求的域名一致、证书的公钥(RSA加密) 等进行校验;
2. 客户端如果校验通过后，就根据证书的公钥的有效，生成随机数，随机数使用公钥进行加密(RSA加密); 
3. 消息体产生后，对它的摘要进行MD5(或者SHA1)算法加密，此时就得到了RSA签名; 
4. 发送给服务端，此时只有服务端(RSA私钥)能解密; 
5. 解密得到的随机数，再用AES加密，作为密钥(此时的密钥只有客户端和服务端知道)。
  